<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ripples Remain</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    audio {
      display: block;
      width: 100%;
      max-width: 400px;
    }
    .menu-image {
      width: 100%;
      height: auto;
      display: block;
      max-width: 100vw;
    }
  </style>
</head>
<body>

  <!-- 四格選單（iPad 與桌機） -->
  <div id="menu">
    <img src="menu.png" usemap="#songmap" class="menu-image" alt="選單" width="1200" height="800" />
    <map name="songmap">
      <area shape="rect" coords="0,0,600,400" href="#" onclick="openSong(1)" />
      <area shape="rect" coords="600,0,1200,400" href="#" onclick="openSong(2)" />
      <area shape="rect" coords="0,400,600,800" href="#" onclick="openSong(3)" />
      <area shape="rect" coords="600,400,1200,800" href="#" onclick="openSong(4)" />
    </map>
  </div>

  <script>
    // 讓 image map 隨圖片縮放
    function resizeImageMap() {
      const img = document.querySelector('.menu-image');
      const map = document.querySelector('map[name="songmap"]');
      const originalWidth = 1200;
      const scale = img.clientWidth / originalWidth;

      const areas = map.querySelectorAll('area');
      areas.forEach(area => {
        const originalCoords = area.dataset.originalCoords;
        if (!originalCoords) return;
        const coords = originalCoords.split(',').map(coord => Math.round(coord * scale));
        area.coords = coords.join(',');
      });
    }

    // 初始化 dataset
    document.querySelectorAll('area').forEach(area => {
      if (!area.dataset.originalCoords) {
        area.dataset.originalCoords = area.coords;
      }
    });

    window.addEventListener('resize', resizeImageMap);
    window.addEventListener('load', resizeImageMap);
  </script>

</body>
</html>
